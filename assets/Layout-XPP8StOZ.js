import{j as ae,m as te,af as ne,_ as K,V as se,d as q,u as Z,l as U,e as ee,g as f,i as A,s as re,a4 as ce,J as oe,P as Q,ag as ie,C as ue,z as de,A as ge,r as B,b as pe,D as y,E as T,F as o,Q as d,H as c,G as p,S as ve,O as R,L as O,I as N,K as he,R as V}from"./index-DRkaJlvC.js";import{u as fe,d as _e,e as me,c as Ce,f as be}from"./User-Do7w9z6T.js";import{h as ye}from"./moment-BjLXg0w5.js";import{P as Y}from"./Plan-BJnWljSG.js";import{W as Se,B as $e}from"./index-Ce82sHUd.js";import{g as xe,i as ke,a as Pe}from"./colors-DblmAcNW.js";import"./User-BGMk0TC4.js";const W=(e,r,n)=>{const l=ne(n);return{[`${e.componentCls}-${r}`]:{color:e[`color${n}`],background:e[`color${l}Bg`],borderColor:e[`color${l}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},Be=e=>xe(e,(r,n)=>{let{textColor:l,lightBorderColor:s,lightColor:t,darkColor:i}=n;return{[`${e.componentCls}-${r}`]:{color:l,background:t,borderColor:s,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}}),Te=e=>{const{paddingXXS:r,lineWidth:n,tagPaddingHorizontal:l,componentCls:s}=e,t=l-n,i=r-n;return{[s]:K(K({},se(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:t,fontSize:e.tagFontSize,lineHeight:`${e.tagLineHeight}px`,whiteSpace:"nowrap",background:e.tagDefaultBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",[`&${s}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.tagDefaultColor},[`${s}-close-icon`]:{marginInlineStart:i,color:e.colorTextDescription,fontSize:e.tagIconSize,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${s}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${s}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:t}}),[`${s}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},le=ae("Tag",e=>{const{fontSize:r,lineHeight:n,lineWidth:l,fontSizeIcon:s}=e,t=Math.round(r*n),i=e.fontSizeSM,_=t-l*2,v=e.colorFillAlter,h=e.colorText,a=te(e,{tagFontSize:i,tagLineHeight:_,tagDefaultBg:v,tagDefaultColor:h,tagIconSize:s-2*l,tagPaddingHorizontal:8,tagBorderlessBg:e.colorFillTertiary});return[Te(a),Be(a),W(a,"success","Success"),W(a,"processing","Info"),W(a,"error","Error"),W(a,"warning","Warning")]}),we=()=>({prefixCls:String,checked:{type:Boolean,default:void 0},onChange:{type:Function},onClick:{type:Function},"onUpdate:checked":Function}),X=q({compatConfig:{MODE:3},name:"ACheckableTag",inheritAttrs:!1,props:we(),setup(e,r){let{slots:n,emit:l,attrs:s}=r;const{prefixCls:t}=Z("tag",e),[i,_]=le(t),v=a=>{const{checked:g}=e;l("update:checked",!g),l("change",!g),l("click",a)},h=U(()=>ee(t.value,_.value,{[`${t.value}-checkable`]:!0,[`${t.value}-checkable-checked`]:e.checked}));return()=>{var a;return i(f("span",A(A({},s),{},{class:[h.value,s.class],onClick:v}),[(a=n.default)===null||a===void 0?void 0:a.call(n)]))}}}),ze=()=>({prefixCls:String,color:{type:String},closable:{type:Boolean,default:!1},closeIcon:Q.any,visible:{type:Boolean,default:void 0},onClose:{type:Function},onClick:ie(),"onUpdate:visible":Function,icon:Q.any,bordered:{type:Boolean,default:!0}}),w=q({compatConfig:{MODE:3},name:"ATag",inheritAttrs:!1,props:ze(),slots:Object,setup(e,r){let{slots:n,emit:l,attrs:s}=r;const{prefixCls:t,direction:i}=Z("tag",e),[_,v]=le(t),h=re(!0);ce(()=>{e.visible!==void 0&&(h.value=e.visible)});const a=u=>{u.stopPropagation(),l("update:visible",!1),l("close",u),!u.defaultPrevented&&e.visible===void 0&&(h.value=!1)},g=U(()=>ke(e.color)||Pe(e.color)),j=U(()=>ee(t.value,v.value,{[`${t.value}-${e.color}`]:g.value,[`${t.value}-has-color`]:e.color&&!g.value,[`${t.value}-hidden`]:!h.value,[`${t.value}-rtl`]:i.value==="rtl",[`${t.value}-borderless`]:!e.bordered})),z=u=>{l("click",u)};return()=>{var u,C,b;const{icon:I=(u=n.icon)===null||u===void 0?void 0:u.call(n),color:S,closeIcon:$=(C=n.closeIcon)===null||C===void 0?void 0:C.call(n),closable:H=!1}=e,F=()=>H?$?f("span",{class:`${t.value}-close-icon`,onClick:a},[$]):f(ue,{class:`${t.value}-close-icon`,onClick:a},null):null,D={backgroundColor:S&&!g.value?S:void 0},x=I||null,k=(b=n.default)===null||b===void 0?void 0:b.call(n),M=x?f(oe,null,[x,f("span",null,[k])]):k,L=e.onClick!==void 0,P=f("span",A(A({},s),{},{onClick:z,class:[j.value,s.class],style:[D,s.style]}),[M,F()]);return _(L?f(Se,null,{default:()=>[P]}):P)}}});w.CheckableTag=X;w.install=function(e){return e.component(w.name,w),e.component(X.name,X),e};const Ie="_container_1tkwt_1",He="_fs_1tkwt_23",Fe={container:Ie,fs:He},De={class:"ViewWrapper"},Me=o("h4",{class:""},"订单详情",-1),Le={class:"text-sm mt-2"},Ne=o("span",null,null,-1),We=o("hr",{class:"mt-3"},null,-1),Ae=o("h4",null,"商品详情",-1),je={class:"flex mt-2 justify-between items-center"},Ee=o("hr",{class:"mt-5"},null,-1),Re={class:"lg:flex justify-between mt-5"},Oe={key:0,class:"lg:w-[60%]"},Ve=o("h4",null,"支付方式",-1),Ye={class:"flex"},Ue=["onClick"],Xe=["src"],Ge={class:"lg:w-[40%] flex flex-col"},Je=o("h4",null,"订单摘要",-1),Ke=o("p",{style:{"font-size":"20px","margin-top":"20px"}},"总计:",-1),Qe={class:"mt-2 font-black"},qe={key:0,class:"flex flex-col mt-5"},Ze=o("hr",null,null,-1),eo={class:"flex justify-end pt-5 lg:pl-[72%] gap-2"},oo={__name:"Layout",setup(e){const r=fe(),n=ge(),l=B(),s=B(),t=B(0);pe(()=>{_e(n.params.id).then(a=>{l.value=a.data}),me().then(a=>{s.value=a.data})});const i=B(!1),_=()=>{i.value=!0,Ce({trade_no:n.params.id}).then(a=>{V.success("取消订单成功"),location.reload()}).catch(a=>{V.error(a),i.value=!1})},v=B(!1),h=()=>{v.value=!0,be({trade_no:n.params.id,method:s.value[t.value].id}).then(a=>{window.location.href=a.data}).catch(a=>{V.error(a),v.value=!1})};return(a,g)=>{var u,C,b,I,S,$,H,F,D,x,k,M,L,P,G,J;const j=w,z=$e;return y(),T("div",De,[o("div",{class:N(a.$style.container)},[Me,o("div",Le,[o("p",null,[d("订单号："),o("span",null,c(p(n).params.id),1)]),o("p",null,[d("创建时间："+c(p(ye)(((u=l.value)==null?void 0:u.created_at)*1e3).format("YYYY-MM-DD HH:ss:mm")),1),Ne])]),We,Ae,o("div",je,[o("div",null,[o("p",null,[d("产品名称："),o("span",null,c((C=l.value)==null?void 0:C.plan.name),1)]),o("p",null,[d("类型/周期："),o("span",null,c(p(Y).prototype.Handel_name((b=l.value)==null?void 0:b.period)),1)]),o("p",null,[d("产品流量："),o("span",null,c((I=l.value)==null?void 0:I.plan.transfer_enable)+" GB",1)])]),l.value?(y(),ve(j,{key:0,color:p(Y).prototype.Handel_status((S=l.value)==null?void 0:S.status)[2]},{default:R(()=>{var m;return[d(c(p(Y).prototype.Handel_status((m=l.value)==null?void 0:m.status)[1]),1)]}),_:1},8,["color"])):O("",!0)]),Ee,o("div",Re,[(($=l.value)==null?void 0:$.status)===0?(y(),T("div",Oe,[Ve,o("div",Ye,[o("div",{class:N([a.$style.fs,"flex flex-col mt-5 gap-5"])},[(y(!0),T(oe,null,he(s.value,(m,E)=>(y(),T("div",{class:N([E===t.value?"border-[var(--bg)]":"","cursor-pointer flex border rounded-xl py-2 px-5 gap-2 items-center"]),onClick:ao=>t.value=E},[o("img",{src:m.icon,alt:"",class:"w-12"},null,8,Xe),o("p",{class:N(E===t.value?"!text-[var(--bg)]":"")},c(m.name),3)],10,Ue))),256))],2)])])):O("",!0),o("div",Ge,[Je,o("p",null,[d("商品价格: "),o("span",null,c((H=p(r).Config)==null?void 0:H.currency_symbol)+c((((F=l.value)==null?void 0:F.plan[l.value.period])/100).toFixed(2)),1)]),o("p",null,[d("余额支付: "),o("span",null,c((D=p(r).Config)==null?void 0:D.currency_symbol)+c(((x=l.value)==null?void 0:x.balance_amount)||0),1)]),o("p",null,[d("抵扣金额: "),o("span",null,c((k=p(r).Config)==null?void 0:k.currency_symbol)+c((((M=l.value)==null?void 0:M.discount_amount)/100).toFixed(2)||0),1)]),o("p",null,[d("旧订阅折抵金额: "),o("span",null,c((L=p(r).Config)==null?void 0:L.currency_symbol)+" 0",1)]),Ke,o("div",Qe,[o("h2",null,c((P=p(r).Config)==null?void 0:P.currency_symbol)+c((((G=l.value)==null?void 0:G.total_amount)/100).toFixed(2)),1)])])]),((J=l.value)==null?void 0:J.status)===0?(y(),T("div",qe,[Ze,o("div",eo,[f(z,{loading:i.value,block:"",danger:"",ghost:"",size:"large",type:"primary",onClick:g[0]||(g[0]=m=>_())},{default:R(()=>[d("取消订单")]),_:1},8,["loading"]),f(z,{loading:v.value,block:"",size:"large",type:"primary",onClick:g[1]||(g[1]=m=>h())},{default:R(()=>[d("立即支付")]),_:1},8,["loading"])])])):O("",!0)],2)])}}},lo={$style:Fe},go=de(oo,[["__cssModules",lo]]);export{go as default};
